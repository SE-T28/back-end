{"version":3,"file":"js/732.e81a3860.js","mappings":"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","sources":["webpack://iss4u/./src/components/FormAddTask.vue","webpack://iss4u/./src/api/tasks/addTask.js","webpack://iss4u/./src/components/FormAddTask.vue?eaa7"],"sourcesContent":["<template>\r\n    <div class=\"row justify-content-center\">\r\n        <div class=\"col-9 align-self-center prova\">\r\n            <h1>Aggiungi task</h1>\r\n            <form class=\"form-floating\" @submit.prevent=\"addTask\">\r\n                <div class=\"row\" v-if=\"isError\">\r\n                    <div class=\"col-md-12 error\">\r\n                        {{ error }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"row form-floating\">\r\n                    <div class=\"col-md-6 form-floating\">\r\n                        <input type=\"date\" class=\"form-control\" v-model=\"startDate\">\r\n                        <label for=\"startDate\" class=\"myLabel\"> &nbsp; &nbsp;Data di inizio</label>\r\n                    </div>\r\n                    <div class=\"col-md-6 form-floating\">\r\n                        <input type=\"date\" class=\"form-control\" v-model=\"endDate\">\r\n                        <label for=\"endDate\" class=\"myLabel\"> &nbsp; &nbsp;Data di fine</label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row form-floating\">\r\n                    <div class=\"col-md-6 form-floating\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"Name\" v-model=\"taskName\">\r\n                        <label for=\"Name\" class=\"myLabel\"> &nbsp; &nbsp;Nome task</label>\r\n                    </div>\r\n                    <div class=\"col-md-6 form-floating\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"modulo\" v-model=\"moduleName\">\r\n                        <label for=\"modulo\" class=\"myLabel\"> &nbsp; &nbsp;Modulo</label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row form-floating\">\r\n                    <div class=\"col form-floating input-group mb-9\">\r\n                        <span class=\"input-group-text myLabel\" style=\"background-color: white;\" >Descrizione</span>\r\n                        <textarea type=\"date\" class=\"form-control\" id=\"description\" aria-label=\"Descrizione\" style=\"min-height: 100%\" v-model=\"txtDescription\"></textarea>\r\n                    </div>\r\n                    <div class=\"col-md-3 \">\r\n                        <label for=\"checkbox\" class=\"myLabel\"> &nbsp; &nbsp;Completato? </label>\r\n                        <input type=\"checkbox\" id=\"checkbox\" v-model=\"checked\" style=\"margin: 20px;\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row form-floating\" v-if=\"isAmministratore\">\r\n                    <div class=\"col-md-9 form-floating input-group\">\r\n\r\n                        <!--\r\n                        <input type=\"text\" class=\"form-control\" id=\"userID\" v-model=\"idUser\">\r\n                        <label for=\"userID\" class=\"myLabel\"> &nbsp; &nbsp;ID utente</label>-->\r\n                        <select v-model=\"idUser\" class=\"form-control\" style=\"color: #0EA2BD\">\r\n                            <option disabled value=\"\">Seleziona un utente</option>\r\n                            <option v-for=\"option in options\" :value=\"option.id\">\r\n                                {{ option.nome }} {{option.cognome}}: {{ option.id }} \r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <!-- input field of start date, end date, name, module, description, isCompleted, userId-->\r\n                <div class=\"row \">\r\n                    <div class=\"col-md-12\">\r\n                        <button class=\"btn btn-primary\" type=\"submit\">Aggiungi</button>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </form>\r\n\r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\n    import {addTask} from \"../api/tasks/addTask\"\r\n    import {getCrew} from \"../api/users/astronauts\"\r\n    export default{\r\n        name: \"FormAddTask\",\r\n        data(){\r\n            return{\r\n                isAmministratore: false,\r\n                txtDescription: \"\",\r\n                moduleName: \"\",\r\n                startDate : \"\",\r\n                endDate: \"\",\r\n                taskName: \"\",\r\n                checked: false,\r\n                idUser: \"\",\r\n                error: \"\",\r\n                isError : false,\r\n                selected: \"\",\r\n                options: [],\r\n                val: 1\r\n            }\r\n        },\r\n        created(){\r\n            if(!localStorage.getItem('role')){\r\n                this.$router.push(\"/\");\r\n            }else if(localStorage.getItem('role') === 'ROLE_AMMINISTRATORE'){\r\n                this.isAmministratore = true;\r\n            }\r\n            this.selectIds();\r\n            this.isError = false;\r\n            this.error = \"\";\r\n        },\r\n        methods:{\r\n            selectIds(){\r\n                // Seleziona solo per gli amministratori\r\n                //console.log(\"Entrato nella get degli IDs\");\r\n                getCrew().then(({data}) => {\r\n                    console.log(\"La richiesta è arrivata:\");\r\n                    console.log(data);\r\n                    for(let i = 0; i < data.length; i++){\r\n                        if(data[i].role == \"ROLE_AMMINISTRATORE\" ){\r\n                            if(this.isAmministratore){\r\n                                var myId = data[i]._id;\r\n                                var UserName = data[i].nome;\r\n                                var UserSurname = data[i].cognome;\r\n                                this.options.push({id: myId, nome: UserName, cognome: UserSurname});\r\n                            }\r\n                        }else{\r\n                            var myId = data[i]._id;\r\n                            var UserName = data[i].nome;\r\n                            var UserSurname = data[i].cognome;\r\n                            this.options.push({id: myId, nome: UserName, cognome: UserSurname});\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            addTask(){\r\n                console.log(this.startDate);\r\n                console.log(this.endDate);\r\n\r\n                if(this.validateForm){\r\n                    console.log(\"Data:\");\r\n                    console.log(this.data);\r\n                    var prova = false;\r\n                    var index;\r\n                    for (index = 0; index < this.options.length && !prova; index++) {\r\n                        const element = this.options[index];\r\n                        if(element.id == this.idUser){\r\n                            prova = true;\r\n                        }\r\n                    }\r\n                    index--;\r\n                    console.log(\"Options:\");\r\n                    console.log(this.options);\r\n                    console.log(\"Options[\"+index+\"]: \"+this.options[index]);\r\n                    console.log(this.options[index].nome); // Funziona\r\n                    console.log(this.options[index].cognome); // Funziona\r\n                    \r\n                    const task = {\r\n                        data_inizio: this.startDate,\r\n                        data_fine: this.endDate,\r\n                        nome: this.taskName,\r\n                        modulo: this.moduleName,\r\n                        descrizione: this.txtDescription,\r\n                        userId: this.idUser,\r\n                        completata: this.checked,\r\n                        nomeuser: this.options[index].nome, \r\n                        cognomeuser: this.options[index].cognome\r\n                    };\r\n                    /*const task = {\r\n                        \"data_inizio\": \"2022-04-05T00:00:00.000+00:00\",\r\n                        \"data_fine\":\"2022-04-06T00:00:00.000+00:00\",\r\n                        \"modoulo\": \"Modulo 1\",\r\n                        \"nome\": \"Task 3\",\r\n                        \"completata\": false,\r\n                        \"nomeuser\": \"matteo\",\r\n                        \"cognomeuser\": \"parma\"\r\n                    };*/\r\n                    \r\n                    /*addTask(task).then(response =>{\r\n                        if(response.status == 201){\r\n                            alert(\"Task aggiunta con successo\");\r\n                            this.$router.push(\"/tasks\");\r\n                        }else{\r\n                            this.isError = true;\r\n                            this.error = response.status+\": \"+response.data.message;\r\n                        }\r\n                    });*/\r\n                    // add task and catch error\r\n                    addTask(task).then(response =>{\r\n                        if(response.status == 201){\r\n                            alert(\"Task aggiunta con successo\");\r\n                            this.$router.push(\"/tasks\");\r\n                        }else{\r\n                            this.isError = true;\r\n                            this.error = response.status+\": \"+response.data.message;\r\n                        }\r\n                    }).catch(error => {\r\n                        this.isError = true;\r\n                        this.error = error.response.status+\": \"+error.response.data.message;\r\n                    });\r\n            }},\r\n            validateForm(){\r\n                // validate form\r\n                if(this.startDate == \"\" ){\r\n                    this.error = \"Inserisci una data di inizio\";\r\n                    this.isError = true;\r\n                    return false;\r\n                }\r\n                if(this.endDate == \"\" ){\r\n                    this.error = \"Inserisci una data di fine\";\r\n                    this.isError = true;\r\n                    return false;\r\n                }\r\n                if(this.taskName == \"\"){\r\n                    this.error = \"Inserisci un nome per la task\";\r\n                    this.isError = true;\r\n                    return false;\r\n                }\r\n                if(this.moduleName == \"\"){\r\n                    this.error = \"Inserisci un nome per il modulo\";\r\n                    this.isError = true;\r\n                    return false;\r\n                }\r\n                if(this.txtDescription == \"\"){\r\n                    this.error = \"Inserisci una descrizione\";\r\n                    this.isError = true;\r\n                    return false;\r\n                }\r\n                if(this.isAmministratore && this.idUser == \"\"){\r\n                    this.error = \"Inserisci un id utente\";\r\n                    this.isError = true;\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .error{\r\n        color: red;\r\n        text-decoration: underline;\r\n    }\r\n    .myLabel{\r\n        color: #0EA2BD !important; \r\n        font-weight: 550;\r\n    }\r\n    .prova{\r\n        margin-top: 60px;\r\n        border: 1px solid rgba(0, 0, 0, 0.084);\r\n        background: #fff;\r\n        box-shadow: 12px 15px 20px 0px rgba(46,61,73,0.15);\r\n        border-radius: 10px;\r\n\r\n    }\r\n    .prova h1{\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n        color: #0EA2BD;\r\n    }\r\n    .prova form{\r\n        padding: 20px;\r\n    }\r\n</style>","import init from \"../init\";\r\n\r\n// router.post('/task', upload.none(),[authJwt.verificaToken, authJwt.isTecnico_Interno], taskController.addTask);\r\nexport const addTask = (data) => {\r\n    return init.post(\"/task\", data);\r\n}","import { render } from \"./FormAddTask.vue?vue&type=template&id=3c9b5d3c&scoped=true\"\nimport script from \"./FormAddTask.vue?vue&type=script&lang=js\"\nexport * from \"./FormAddTask.vue?vue&type=script&lang=js\"\n\nimport \"./FormAddTask.vue?vue&type=style&index=0&id=3c9b5d3c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\huawei\\\\Desktop\\\\Ing del software\\\\progetto\\\\SE-T28\\\\Documents\\\\D4\\\\iss4u\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c9b5d3c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","style","disabled","value","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onSubmit","$options","$data","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","id","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_Fragment","option","nome","cognome","_hoisted_25","addTask","data","init","name","isAmministratore","txtDescription","moduleName","startDate","endDate","taskName","checked","idUser","error","isError","selected","options","val","created","localStorage","getItem","this","$router","push","selectIds","methods","getCrew","then","console","log","i","length","role","myId","_id","UserName","UserSurname","validateForm","index","prova","element","task","data_inizio","data_fine","modulo","descrizione","userId","completata","nomeuser","cognomeuser","response","status","alert","message","catch","__exports__","render"],"sourceRoot":""}